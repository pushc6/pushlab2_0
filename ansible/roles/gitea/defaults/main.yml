---
# Default variables for Gitea role

# Version of Gitea to install. Set to a specific version (e.g., "1.22.3") or "latest" to auto-resolve.
gitea_version: "1.24.6"

# If true, the role will look up the latest stable release via API and upgrade if needed.
# When gitea_version == "latest", this is implicitly enabled.
gitea_auto_update: false

# Release API endpoint to discover the latest version (no auth required)
gitea_release_api_url: "https://api.github.com/repos/go-gitea/gitea/releases/latest"

# Path to install the gitea binary
gitea_binary_path: "/usr/local/bin/gitea"

# Binary download URL (effective URL may be overridden when auto-updating)
gitea_download_url: "https://dl.gitea.com/gitea/{{ gitea_version }}/gitea-{{ gitea_version }}-linux-amd64"

# Optional backup settings when upgrading
gitea_backup_before_upgrade: true
gitea_backup_dir: "/var/backups"
gitea_backup_include:
  - "/etc/gitea"
  - "/var/lib/gitea"

# HTTP port and external URL
gitea_http_port: 3000
# If you have DNS, set gitea_domain to the FQDN; else this defaults to ansible_host
# gitea_domain: "git.example.com"
# Build external URL from domain or IP
gitea_external_url: "http://{{ (gitea_domain | default(ansible_host)) }}:{{ gitea_http_port }}"

# SSH settings for Gitea
# We'll run the internal SSH server on a high port (22 requires root).
gitea_ssh_port: 2222

# Actions runner settings (optional)
act_runner_version: "0.2.10"
gitea_runner_download_url: "https://dl.gitea.com/act_runner/{{ act_runner_version }}/act_runner-{{ act_runner_version }}-linux-amd64.tar.gz"
# Provide a registration token to auto-register a runner
# gitea_runner_registration_token: ""
# Runner name and labels
gitea_runner_name: "runner-{{ inventory_hostname }}"
gitea_runner_labels:
  - "self-hosted"
  - "linux"
  - "x64"

# Additional labels to attach to the runner on registration (optional)
# Example: ["alma"] to target AlmaLinux jobs with runs-on: [self-hosted, linux, x64, alma]
gitea_runner_labels_extra: []

# Prefer running the Actions runner via Docker (recommended)
gitea_runner_use_docker: true
gitea_runner_image: "gitea/act_runner:latest"
gitea_runner_data_dir: "/opt/gitea-runner"

# Optional: pre-pull additional container images on the runner host
# so jobs that use `container:` start faster. Add images as needed.
gitea_runner_pull_images:
  - "almalinux:10"

# If true, stop the runner service and force re-registration (to update labels, name, etc.)
gitea_runner_force_reregister: false
