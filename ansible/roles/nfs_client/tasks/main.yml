---
# Install NFS client packages and configure persistent mount
- name: Ensure required packages are present
  ansible.builtin.package:
    name:
      - nfs-utils
      - nfs4-acl-tools
    state: present

- name: Create mount point directory
  ansible.builtin.file:
    path: "{{ nfs_mount_point }}"
    state: directory
    owner: root
    group: root
    mode: '0755'

- name: Mount NFS export and persist in fstab
  ansible.builtin.mount:
    src: "{{ nfs_server }}:{{ nfs_export_path }}"
    path: "{{ nfs_mount_point }}"
    fstype: nfs4
    opts: defaults,_netdev
    state: mounted
